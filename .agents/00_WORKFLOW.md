# Общий рабочий процесс агентной команды

Цель
- Выполнить задачу из TASK.md максимально быстро, безопасно и с проверяемым качеством.

Коммуникация
- Единый общий артефакт: SHARED.md. Писать кратко, с префиксом роли. Формат: [ROLE] действие → результат → ссылка на diff.
- Не дублировать информацию. Если нужна деталь, делать ссылку на соответствующий файл.

Хэндоффы
- Порядок исполнения по умолчанию: PRODUCT_OWNER → TECH_LEAD → ARCHITECT → IMPLEMENTER → SECURITY_AUDITOR → QA_ENGINEER → DEVOPS → DOCS_WRITER → RELEASE_MANAGER.
- Любая роль может инициировать обратный хэндофф, указав причину и конкретный запрос.

Определение готовности
- Все пункты из раздела "Гейты качества" удовлетворены.
- Все чеклисты ключевых ролей выполнены.
- Все тесты зелёные. Статическая проверка и линтеры без ошибок.
- SECURITY_AUDITOR закрыл критичные и высокие риски или зафиксировал акцепт.
- RELEASE_MANAGER сформировал запись в RELEASE_NOTES.md.

Гейты качества
- Архитектурная согласованность. Нет циклических зависимостей, нет утечек абстракций, соответствует принятым паттернам.
- Безопасность. Нет уязвимостей класса inj, path traversal, небезопасной десериализации, секреты не в коде, зависимости проверены.
- Тесты. Покрытие ключевой логики юнитами, интеграционные happy path, как минимум один негативный сценарий.
- Производительность. Нет очевидных N+1, неуместной синхронной блокировки, грубых аллокаций.
- DX. Чёткие инструкции запуска в README, make-скрипты, минимум команд для старта.
- Обслуживаемость. Логи, хелсчеки, элементарные метрики.

Принципы правок кода
- Предпочтение малым PR с изолированными изменениями.
- Архитектурные решения документируются в SHARED.md, раздел ADR.
- Все изменения сопровождаются коротким коммит-месседжем по Conventional Commits.

Теги в SHARED.md
- [DECISION], [RISK], [QUESTION], [BLOCKER], [DONE], [LINK], [ADR].
